<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes - Yinzheng Xiong</title>
    <link rel="stylesheet" href="style.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Open+Sans:wght@300;400;700&display=swap');
    </style>
</head>
<body>
    <header class="hero">
        <div class="hero-content">
            <h1>Notes & Reflections</h1>
            <p>Examples of my personal notes on various topics.</p>
        </div>
    </header>

    <section class="section about">
        <h2>Notes</h2>
        <div id="notes-container" class="projects"></div>
    </section>

    <footer>
        <p>&copy; <span id="year"></span> Yinzheng Xiong. All rights reserved.</p>
    </footer>

    <script>
        // Set the current year in the footer
        document.getElementById('year').textContent = new Date().getFullYear();

        /*
         * Fetch notes from the serverless API endpoint and list them as
         * clickable links. Each note title becomes a link that navigates
         * to a dedicated page (note.html) with the note ID in the query
         * string. This approach keeps the main notes page concise while
         * allowing long-form content and images to be displayed on their
         * own page.
         */
        fetch('/api/notes')
            .then((response) => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then((notes) => {
                const container = document.getElementById('notes-container');
                notes.forEach((note) => {
                    // Determine the note ID and title. Support different
                    // property names in case the database returns uppercase
                    // column names.
                    const id = note.id || note.ID;
                    const title = note.title || note.TITLE || note.name || 'Untitled';
                    const card = document.createElement('div');
                    card.className = 'project';
                    card.innerHTML = `<h3><a href="note.html?id=${id}">${title}</a></h3>`;
                    container.appendChild(card);
                });
            })
            .catch((error) => {
                console.error('Error loading notes:', error);
            });
    </script>
</body>
</html>
